{% extends 'avaliacoes/base_avaliacoes.html' %}

{% block page_title %}Criar Ciclo de Avalia√ß√£o{% endblock %}
{% block page_description %}Configure um novo per√≠odo de avalia√ß√£o{% endblock %}

{% block content %}
<div class="form-section">
    <form method="post">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.nome.id_for_label }}">
                <strong>{{ form.nome.label }}</strong>
            </label>
            {{ form.nome }}
            {% if form.nome.errors %}
                <div style="color: var(--cor08); margin-top: 5px;">
                    {% for error in form.nome.errors %}
                        <small>{{ error }}</small>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div class="form-group">
            <label for="{{ form.descricao.id_for_label }}">
                <strong>{{ form.descricao.label }}</strong>
            </label>
            {{ form.descricao }}
            {% if form.descricao.errors %}
                <div style="color: var(--cor08); margin-top: 5px;">
                    {% for error in form.descricao.errors %}
                        <small>{{ error }}</small>
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label for="{{ form.data_inicio.id_for_label }}">
                    <strong>{{ form.data_inicio.label }}</strong>
                </label>
                {{ form.data_inicio }}
                {% if form.data_inicio.errors %}
                    <div style="color: var(--cor08); margin-top: 5px;">
                        {% for error in form.data_inicio.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.data_fim.id_for_label }}">
                    <strong>{{ form.data_fim.label }}</strong>
                </label>
                {{ form.data_fim }}
                {% if form.data_fim.errors %}
                    <div style="color: var(--cor08); margin-top: 5px;">
                        {% for error in form.data_fim.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <div class="form-group">
            <label for="{{ form.questionario.id_for_label }}">
                <strong>{{ form.questionario.label }}</strong>
            </label>
            {{ form.questionario }}
            {% if form.questionario.errors %}
                <div style="color: var(--cor08); margin-top: 5px;">
                    {% for error in form.questionario.errors %}
                        <small>{{ error }}</small>
                    {% endfor %}
                </div>
            {% endif %}
            <small style="color: #666; display: block; margin-top: 5px;">
                Selecione o question√°rio que ser√° utilizado neste ciclo de avalia√ß√£o
            </small>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <div style="display: flex; align-items: center; gap: 10px;">
                    {{ form.ativo }}
                    <label for="{{ form.ativo.id_for_label }}">
                        {{ form.ativo.label }}
                    </label>
                </div>
                {% if form.ativo.errors %}
                    <div style="color: var(--cor08); margin-top: 5px;">
                        {% for error in form.ativo.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                <div style="display: flex; align-items: center; gap: 10px;">
                    {{ form.anonimo }}
                    <label for="{{ form.anonimo.id_for_label }}">
                        {{ form.anonimo.label }}
                    </label>
                </div>
                {% if form.anonimo.errors %}
                    <div style="color: var(--cor08); margin-top: 5px;">
                        {% for error in form.anonimo.errors %}
                            <small>{{ error }}</small>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        </div>

        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid var(--cor01);">
            <a href="{% url 'listar_avaliacoes' %}" class="btn btn-secondary">
                ‚Üê Cancelar
            </a>
            
            <button type="submit" class="btn">
                ‚úì Criar Ciclo
            </button>
        </div>
    </form>
</div>

<div class="form-section">
    <h2>üìÖ Informa√ß√µes sobre Ciclos</h2>
    <div style="background: #f8f9fa; padding: 20px; border-radius: var(--border-radius-small); border-left: 4px solid var(--cor02);">
        <h4 style="color: var(--cor03); margin-bottom: 15px;">O que √© um Ciclo de Avalia√ß√£o?</h4>
        <p style="color: #666; line-height: 1.6; margin-bottom: 15px;">
            Um ciclo de avalia√ß√£o define um per√≠odo espec√≠fico durante o qual os alunos podem responder 
            aos question√°rios. Cada ciclo est√° associado a um question√°rio e pode ter configura√ß√µes 
            espec√≠ficas de anonimato e datas.
        </p>
        
        <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #dee2e6;">
            <h5 style="color: var(--cor03); margin-bottom: 10px;">Configura√ß√µes Importantes:</h5>
            <ul style="color: #666; line-height: 1.6;">
                <li><strong>Per√≠odo:</strong> Define quando as avalia√ß√µes estar√£o dispon√≠veis</li>
                <li><strong>Question√°rio:</strong> Deve estar ativo e ter perguntas cadastradas</li>
                <li><strong>Ativo:</strong> Apenas ciclos ativos s√£o vis√≠veis para os alunos</li>
                <li><strong>An√¥nimo:</strong> Quando ativado, oculta a identidade dos respondentes</li>
            </ul>
        </div>
        
        <div style="margin-top: 15px; padding: 10px; background: #fff3cd; border-radius: var(--border-radius-small);">
            <strong style="color: #856404;">‚ö†Ô∏è Aten√ß√£o:</strong>
            <span style="color: #856404;">
                Certifique-se de que o question√°rio selecionado possui perguntas antes de ativar o ciclo.
            </span>
        </div>
    </div>
</div>
{% endblock %}
