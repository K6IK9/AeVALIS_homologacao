{% load static %} {% load user_tags %}

<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ titulo }}</title>

    <!-- CSS Global -->
    <link rel="stylesheet" href="{% static 'css/global.css' %}" />
    <!-- CSS específico da página -->
    <link rel="stylesheet" href="{% static 'css/minhas_avaliacoes.css' %}" />
  </head>
  <body>
    <div class="container">
      <a href="{% url 'inicio' %}" class="back-button">← Voltar</a>
      <div class="header">
        <h1>{{ titulo }}</h1>
        <p>Consulte suas avaliações respondidas anteriormente</p>
      </div>

      {% if avaliacoes %}
      <div class="avaliacoes-grid">
        {% for avaliacao in avaliacoes %}
        <div class="avaliacao-card">
          <div class="minhas-avaliacoes-header">
            <h3>{{ avaliacao.professor.user.get_full_name }}</h3>
          </div>

          <div class="avaliacao-info">
            <p>
              <strong>Disciplina:</strong> {{ avaliacao.disciplina.disciplina_nome }}
            </p>
            <p><strong>Turma:</strong> {{ avaliacao.turma.codigo_turma }}</p>
            <p>
              <strong>Período:</strong> {{ avaliacao.turma.periodo_letivo.nome }}
            </p>
            <p>
              <strong>Data da Avaliação:</strong> {{ avaliacao.data_criacao|date:"d/m/Y" }}
            </p>
            {% if avaliacao.ciclo %}
            <p><strong>Ciclo:</strong> {{ avaliacao.ciclo.nome }}</p>
            {% endif %}
          </div>

          <div class="avaliacao-actions">
            <a
              href="{% url 'visualizar_avaliacao' avaliacao.id %}"
              class="btn btn-primary"
            >
              Ver Minha Avaliação
            </a>
          </div>
        </div>
        {% endfor %}
      </div>
      {% else %}
      <div class="empty-state">
        <h3>Nenhuma Avaliação Encontrada</h3>
        <p>Você ainda não respondeu nenhuma avaliação docente.</p>
        <a href="{% url 'listar_avaliacoes' %}" class="btn btn-primary">
          Ver Avaliações Disponíveis
        </a>
      </div>
      {% endif %}
    </div>
  </body>
</html>
